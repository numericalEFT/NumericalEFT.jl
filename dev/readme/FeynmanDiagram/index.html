<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>FeynmanDiagram · NumericalEFT.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://numericaleft.github.io/NumericalEFT.jl/readme/FeynmanDiagram/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="NumericalEFT.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">NumericalEFT.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Module ReadMe</span><ul><li><a class="tocitem" href="../Lehmann/">Lehmann</a></li><li class="is-active"><a class="tocitem" href>FeynmanDiagram</a><ul class="internal"><li><a class="tocitem" href="#Infrastructure"><span>Infrastructure</span></a></li><li><a class="tocitem" href="#Supported-Front-end"><span>Supported Front-end</span></a></li><li><a class="tocitem" href="#Computational-Graph-visualization"><span>Computational Graph visualization</span></a></li></ul></li><li><a class="tocitem" href="../MCIntegration/">MCIntegration</a></li><li><a class="tocitem" href="../CompositeGrids/">CompositeGrids</a></li><li><a class="tocitem" href="../GreenFunc/">GreenFunc</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../man/DLR/">Discrete Lehmann Representation</a></li><li><a class="tocitem" href="../../man/kernel/">Lehmann representation convention</a></li></ul></li><li><span class="tocitem">API reference</span><ul><li><a class="tocitem" href="../../lib/Lehmann/">Discrete Lehmann representation</a></li><li><a class="tocitem" href="../../lib/Feynmandiagram/">Feynman Diagram</a></li><li><a class="tocitem" href="../../lib/MCintegration/">Monte Carlo Integrator</a></li><li><a class="tocitem" href="../../lib/compositegrids/">Composite 1D Grids</a></li><li><a class="tocitem" href="../../lib/greenfunc/">Green&#39;s Function</a></li><li><a class="tocitem" href="../../lib/utility/">Utility</a></li><li><a class="tocitem" href="../../lib/fastmath/">Fast Math Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Module ReadMe</a></li><li class="is-active"><a href>FeynmanDiagram</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>FeynmanDiagram</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/numericalEFT/NumericalEFT.jl/blob/master/docs/src/readme/FeynmanDiagram.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="FeynmanDiagram"><a class="docs-heading-anchor" href="#FeynmanDiagram">FeynmanDiagram</a><a id="FeynmanDiagram-1"></a><a class="docs-heading-anchor-permalink" href="#FeynmanDiagram" title="Permalink"></a></h1><p><a href="https://numericalEFT.github.io/FeynmanDiagram.jl/stable"><img src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable"/></a> <a href="https://numericalEFT.github.io/FeynmanDiagram.jl/dev"><img src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"/></a> <a href="https://github.com/numericalEFT/FeynmanDiagram.jl/actions"><img src="https://github.com/numericalEFT/FeynmanDiagram.jl/workflows/CI/badge.svg" alt="Build Status"/></a> <a href="https://codecov.io/gh/numericalEFT/FeynmanDiagram.jl"><img src="https://codecov.io/gh/numericalEFT/FeynmanDiagram.jl/branch/master/graph/badge.svg" alt="Coverage"/></a></p><p>This package implements a mini-compiler that compiles generic Feynman diagrams into computational-graph representations for fast computation. </p><h2 id="Infrastructure"><a class="docs-heading-anchor" href="#Infrastructure">Infrastructure</a><a id="Infrastructure-1"></a><a class="docs-heading-anchor-permalink" href="#Infrastructure" title="Permalink"></a></h2><p>In general, Feynman diagrams represents high-order integral. The integrand are propagators/interactions composed by the basis arithmetic operations (multiplication, addition). The sequence of calculating the integrand by combining the propagators/interactions with the arithmetic operatos can be represented as an algebraic computational graph. In this sense, the computational graph provides an intermediate representation (IR) for Feynman diagrams that completely independent of the diagram type. </p><p><img src="/docs/src/readme/assets/diagram_compiler.svg?raw=true &quot;Compiler Infrastructure&quot;" alt="infrastructure"/></p><p>Base on this observation, we develop a package to compile the integrand of Feynman diagrams into machine code so that one can evaluate the it efficiently. The infrastructure of this package is similar to the modern compiler LLVM for generic programming language. There are three layers: a front-end translates a source code into an IR as a computational graph, then a mid-end optimizes and transforms the IR, and a back-end to compiles the IR to machine code. </p><ul><li><p>The front-end supports Feynman diagrams from weak coupling expansion or strong coupling expansion. The user can incorprate new types of diagrams by writing their own front-end.</p></li><li><p>The mid-end performs universal optimizations and transformations of one computational graph to another. The possible optimizations of the computational graph includes: remove common nodes/leaves, remove zero-valued nodes/leaves, merge small nodes into a large one. The possible transformations include automatic differentiation (which can be useful to derive the diagrams for the specific heat, RG flow equation, etc.), renormalization of the propagators and the interactions, and analytic Matsubara-frequency integration (work in progress).</p></li><li><p>The back-end provides a universal subroutine to evalue the computational graph efficiently. </p></li></ul><h2 id="Supported-Front-end"><a class="docs-heading-anchor" href="#Supported-Front-end">Supported Front-end</a><a id="Supported-Front-end-1"></a><a class="docs-heading-anchor-permalink" href="#Supported-Front-end" title="Permalink"></a></h2><h3 id=".-Generic-Weak-Coupling-Expansion-based-on-the-Parquet-Algorithm"><a class="docs-heading-anchor" href="#.-Generic-Weak-Coupling-Expansion-based-on-the-Parquet-Algorithm">1. Generic Weak Coupling Expansion based on the Parquet Algorithm</a><a id=".-Generic-Weak-Coupling-Expansion-based-on-the-Parquet-Algorithm-1"></a><a class="docs-heading-anchor-permalink" href="#.-Generic-Weak-Coupling-Expansion-based-on-the-Parquet-Algorithm" title="Permalink"></a></h3><p>This algorithm generates the Feynman diagrams of weak coupling expansion. It supports the diagrams of self-energy, polarization, 3-point vertex function and 4-point vertex function. The internal degrees of freedom can be either the loop variables (e.g., momentum or frequency) or the site variables (e.g., imaginary-time or lattice site).</p><p>The main idea of the algorithm is to use the parquet equation to build high-order-vertex-function diagrams from the lower order sub-diagrams. </p><p>The following code is a simple example to generate the one-loop 4-point vertex function diagrams, then visualize the computational graph (namely, an experssion tree).</p><pre><code class="language-julia hljs">using FeynmanDiagram

# Define a parameter structure for the 4-vertex diagram with one-loop, in the momentum and the imaginary-time representation. Require the diagrams to be green&#39;s function irreducible.
para = DiagParaF64(type = Ver4Diag, innerLoopNum = 1,hasTau = true, filter=[NoHartree, Girreducible,])

ver4=Parquet.build(para) #build the diagram tree with the parquet algorithm.

plot_tree(ver4) # visualize the generated diagram tree

tree=ExprTree.build(ver4.diagram) #optimize the diagram tree to get an optimized expression tree</code></pre><p>The generated diagram tree is as shown in the following figure. The leaves of the tree are the propagators (labeled with <code>G</code>) and the interactions (labeled with <code>Ins</code>). By default, the interactions is assumed to spin-symmetric. A typical example is the Coulomb interaction. <img src="assets/ver4tree.png?raw=true &quot;Diagram Tree&quot;" alt="tree"/></p><h3 id=".-Generic-Strong-Coupling-Expansion-(work-in-progress)"><a class="docs-heading-anchor" href="#.-Generic-Strong-Coupling-Expansion-(work-in-progress)">2. Generic Strong Coupling Expansion (work in progress)</a><a id=".-Generic-Strong-Coupling-Expansion-(work-in-progress)-1"></a><a class="docs-heading-anchor-permalink" href="#.-Generic-Strong-Coupling-Expansion-(work-in-progress)" title="Permalink"></a></h3><h3 id=".-Hand-drawing-Feynman-diagrams-(work-in-progress)"><a class="docs-heading-anchor" href="#.-Hand-drawing-Feynman-diagrams-(work-in-progress)">3. Hand-drawing Feynman diagrams (work in progress)</a><a id=".-Hand-drawing-Feynman-diagrams-(work-in-progress)-1"></a><a class="docs-heading-anchor-permalink" href="#.-Hand-drawing-Feynman-diagrams-(work-in-progress)" title="Permalink"></a></h3><h2 id="Computational-Graph-visualization"><a class="docs-heading-anchor" href="#Computational-Graph-visualization">Computational Graph visualization</a><a id="Computational-Graph-visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Computational-Graph-visualization" title="Permalink"></a></h2><p>To visualize the diagram tree, you need to install the ete3 python3 package (http://etetoolkit.org/).</p><p>Note that we rely on &quot;PyCall.jl&quot; to call the ete3 python functions from julia. Therefore, you have to install ete3 python package use the python distribution associated with PyCall. According to the tutorial of PyCall (https://github.com/JuliaPy/PyCall.jl), &quot;by default on Mac and Windows systems, Pkg.add(&quot;PyCall&quot;) or Pkg.build(&quot;PyCall&quot;) will use the Conda.jl package to install a minimal Python distribution (via Miniconda) that is private to Julia (not in your PATH). You can use the Conda Julia package to install more Python packages, and import Conda to print the Conda.PYTHONDIR directory where python was installed. On GNU/Linux systems, PyCall will default to using the python3 program (if any, otherwise python) in your PATH.&quot;</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Lehmann/">« Lehmann</a><a class="docs-footer-nextpage" href="../MCIntegration/">MCIntegration »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 10 October 2022 03:27">Monday 10 October 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
